<?xml version="1.0"?><CLASS_ROOT><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Modula - Esportazione ordini</DESCRIPT><UUID>AFBWoCPaHuiK8Bto6v8JFQ==</UUID><CATEGORY>00</CATEGORY><EXPOSURE>2</EXPOSURE><STATE>1</STATE><RELEASE>0</RELEASE><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-19</CHANGEDON><CHGDANYON>0000-00-00</CHGDANYON><CLSCCINCL>X</CLSCCINCL><FIXPT>X</FIXPT><UNICODE>X</UNICODE><R3RELEASE>750</R3RELEASE><CLSBCCAT>00</CLSBCCAT><DURATION_TYPE>0</DURATION_TYPE><RISK_LEVEL>0</RISK_LEVEL><ATTRIBUTES><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>GS_SEL</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>0</EXPOSURE><STATE>1</STATE><EDITORDER>1</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><ATTDECLTYP>0</ATTDECLTYP><ATTEXPVIRT>0</ATTEXPVIRT><TYPTYPE>1</TYPTYPE><TYPE>TY_S_SEL</TYPE><SRCROW1>0</SRCROW1><SRCCOLUMN1>0</SRCCOLUMN1><SRCROW2>0</SRCROW2><SRCCOLUMN2>0</SRCCOLUMN2><R3RELEASE>750</R3RELEASE><TYPESRC_LENG>0</TYPESRC_LENG></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>GT_DATA</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>0</EXPOSURE><STATE>1</STATE><EDITORDER>2</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><ATTDECLTYP>0</ATTDECLTYP><ATTEXPVIRT>0</ATTEXPVIRT><TYPTYPE>1</TYPTYPE><TYPE>TY_T_DATA</TYPE><SRCROW1>0</SRCROW1><SRCCOLUMN1>0</SRCCOLUMN1><SRCROW2>0</SRCROW2><SRCCOLUMN2>0</SRCCOLUMN2><R3RELEASE>750</R3RELEASE><TYPESRC_LENG>0</TYPESRC_LENG></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>GT_PREL_CONS</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>elenco prelievi per funzione ZMM_CHECK_DELIVERY</DESCRIPT><EXPOSURE>0</EXPOSURE><STATE>1</STATE><EDITORDER>3</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-20</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-20</CHANGEDON><ATTDECLTYP>0</ATTDECLTYP><ATTEXPVIRT>0</ATTEXPVIRT><TYPTYPE>1</TYPTYPE><TYPE>TY_T_PREL_CONS</TYPE><SRCROW1>0</SRCROW1><SRCCOLUMN1>0</SRCCOLUMN1><SRCROW2>0</SRCROW2><SRCCOLUMN2>0</SRCCOLUMN2><R3RELEASE>750</R3RELEASE><TYPESRC_LENG>0</TYPESRC_LENG></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>GT_PREL_ODP</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Componenti ordine di produzione</DESCRIPT><EXPOSURE>0</EXPOSURE><STATE>1</STATE><EDITORDER>4</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-20</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-20</CHANGEDON><ATTDECLTYP>0</ATTDECLTYP><ATTEXPVIRT>0</ATTEXPVIRT><TYPTYPE>1</TYPTYPE><TYPE>TY_T_PREL_ODP</TYPE><SRCROW1>0</SRCROW1><SRCCOLUMN1>0</SRCCOLUMN1><SRCROW2>0</SRCROW2><SRCCOLUMN2>0</SRCCOLUMN2><R3RELEASE>750</R3RELEASE><TYPESRC_LENG>0</TYPESRC_LENG></item></ATTRIBUTES><METHODS><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>CONSTRUCTOR</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>1</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-19</CHANGEDON><MTDTYPE>2</MTDTYPE><MTDDECLTYP>0</MTDDECLTYP><MTDNEWEXC>X</MTDNEWEXC><BCMTDCAT>00</BCMTDCAT><BCMTDSYN>0</BCMTDSYN></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>AUTORITY_CHECK</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>1</EXPOSURE><STATE>1</STATE><EDITORDER>2</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><MTDTYPE>0</MTDTYPE><MTDDECLTYP>0</MTDDECLTYP><MTDNEWEXC>X</MTDNEWEXC><R3RELEASE>750</R3RELEASE><BCMTDCAT>00</BCMTDCAT><BCMTDSYN>0</BCMTDSYN></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>INITIALIZATION</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>2</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><MTDTYPE>0</MTDTYPE><MTDDECLTYP>0</MTDDECLTYP><MTDNEWEXC>X</MTDNEWEXC><BCMTDCAT>00</BCMTDCAT><BCMTDSYN>0</BCMTDSYN></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>RUN</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>3</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><MTDTYPE>0</MTDTYPE><MTDDECLTYP>0</MTDDECLTYP><MTDNEWEXC>X</MTDNEWEXC><BCMTDCAT>00</BCMTDCAT><BCMTDSYN>0</BCMTDSYN></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>GET_SEL</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>4</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><MTDTYPE>0</MTDTYPE><MTDDECLTYP>0</MTDDECLTYP><BCMTDCAT>00</BCMTDCAT><BCMTDSYN>0</BCMTDSYN></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>EXPORT</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>5</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><MTDTYPE>0</MTDTYPE><MTDDECLTYP>0</MTDDECLTYP><MTDNEWEXC>X</MTDNEWEXC><BCMTDCAT>00</BCMTDCAT><BCMTDSYN>0</BCMTDSYN></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>CREATE_SELECTIONS</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>1</EXPOSURE><STATE>1</STATE><EDITORDER>7</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><MTDTYPE>0</MTDTYPE><MTDDECLTYP>0</MTDDECLTYP><MTDNEWEXC>X</MTDNEWEXC><R3RELEASE>750</R3RELEASE><BCMTDCAT>00</BCMTDCAT><BCMTDSYN>0</BCMTDSYN></item></METHODS><EVENTS/><TYPES><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_S_PREL_ODP</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>1</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-20</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>9</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>11</SRCROW2><SRCCOLUMN2>30</SRCCOLUMN2><TYPESRC_LENG>97</TYPESRC_LENG><TYPESRC>BEGIN OF ty_s_prel_odp .
        INCLUDE TYPE zet_comp_aufnr.
    TYPES: END OF ty_s_prel_odp
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_T_PREL_ODP</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>2</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-20</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>13</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>13</SRCROW2><SRCCOLUMN2>46</SRCCOLUMN2><TYPESRC_LENG>43</TYPESRC_LENG><TYPESRC>ty_t_prel_odp TYPE TABLE OF ty_s_prel_odp
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_S_PREL_CONS</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>3</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-20</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>15</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>17</SRCROW2><SRCCOLUMN2>31</SRCCOLUMN2><TYPESRC_LENG>97</TYPESRC_LENG><TYPESRC>BEGIN OF ty_s_prel_cons .
        INCLUDE TYPE zst_prelievi.
    TYPES: END OF ty_s_prel_cons
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_T_PREL_CONS</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>4</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-20</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>19</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>19</SRCROW2><SRCCOLUMN2>48</SRCCOLUMN2><TYPESRC_LENG>45</TYPESRC_LENG><TYPESRC>ty_t_prel_cons TYPE TABLE OF ty_s_prel_cons
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_S_ORDERS_FILE</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>5</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-20</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>21</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>23</SRCROW2><SRCCOLUMN2>33</SRCCOLUMN2><TYPESRC_LENG>102</TYPESRC_LENG><TYPESRC>BEGIN OF ty_s_orders_file .
        INCLUDE TYPE zsmmm_mod_ord.
    TYPES: END OF ty_s_orders_file
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_T_ORDERS_FILE</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>6</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-20</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>25</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>25</SRCROW2><SRCCOLUMN2>52</SRCCOLUMN2><TYPESRC_LENG>49</TYPESRC_LENG><TYPESRC>ty_t_orders_file TYPE TABLE OF ty_s_orders_file
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_S_ORDERS</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>7</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>27</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>36</SRCROW2><SRCCOLUMN2>23</SRCCOLUMN2><TYPESRC_LENG>351</TYPESRC_LENG><TYPESRC>BEGIN OF ty_s_orders,
        bukrs TYPE bukrs,     &quot;Tonolli_G - Ins
        werks TYPE werks_d,   &quot;Tonolli_G - Ins
        lgort TYPE lgort_d,   &quot;Tonolli_G - Ins
        matnr TYPE matnr,
        maktx TYPE maktx,
        meins TYPE meins,
        lgpbe TYPE lgpbe,     &quot;Tonolli_G - Ins
        menge TYPE menge_d,
      END OF ty_s_orders
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_S_DATA</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>8</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>38</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>40</SRCROW2><SRCCOLUMN2>26</SRCCOLUMN2><TYPESRC_LENG>85</TYPESRC_LENG><TYPESRC>BEGIN OF ty_s_data.
        INCLUDE TYPE ty_s_orders.
    TYPES: END OF ty_s_data
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_T_DATA</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>9</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>42</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>42</SRCROW2><SRCCOLUMN2>38</SRCCOLUMN2><TYPESRC_LENG>35</TYPESRC_LENG><TYPESRC>ty_t_data TYPE TABLE OF ty_s_data
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_S_SEL</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>10</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>44</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>57</SRCROW2><SRCCOLUMN2>20</SRCCOLUMN2><TYPESRC_LENG>559</TYPESRC_LENG><TYPESRC>BEGIN OF ty_s_sel,
        p_bukrs  TYPE t001-bukrs,
        p_werks  TYPE marc-werks,
        p_lgort  TYPE mard-lgort,
        p_lgpbe  TYPE mard-lgpbe,
        p_cons   TYPE abap_bool,   &quot; consegne
        p_vbeln  TYPE likp-vbeln,  &quot; input consegna
        p_odp    TYPE abap_bool,   &quot; ordine di produzione
        p_aufnr  TYPE aufk-aufnr,  &quot; inpit ordine di produzione
        p_sendfi TYPE abap_bool,  &quot; invio file
        p_mat    TYPE abap_bool,
        p_mblnr  TYPE mkpf-mblnr,
        p_mjahr  TYPE mkpf-mjahr,
      END OF ty_s_sel
</TYPESRC></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>TY_T_ORDERS</CMPNAME><VERSION>1</VERSION><LANGU>I</LANGU><EXPOSURE>2</EXPOSURE><STATE>1</STATE><EDITORDER>11</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDBY>KOSMEDEV</CHANGEDBY><CHANGEDON>2018-03-26</CHANGEDON><TYPTYPE>4</TYPTYPE><SRCROW1>59</SRCROW1><SRCCOLUMN1>6</SRCCOLUMN1><SRCROW2>59</SRCROW2><SRCCOLUMN2>47</SRCCOLUMN2><TYPESRC_LENG>44</TYPESRC_LENG><TYPESRC>ty_t_orders      TYPE TABLE OF ty_s_orders
</TYPESRC></item></TYPES><PARAMETERS><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>CONSTRUCTOR</CMPNAME><SCONAME>IV_PROGRAM</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Programma chiamante</DESCRIPT><CMPTYPE>1</CMPTYPE><MTDTYPE>2</MTDTYPE><EDITORDER>1</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><PARDECLTYP>0</PARDECLTYP><PARPASSTYP>1</PARPASSTYP><TYPTYPE>1</TYPTYPE><TYPE>SY-REPID</TYPE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>CONSTRUCTOR</CMPNAME><SCONAME>IV_LANGUAGE</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Campo sistema ABAP: chiave lingua dell&apos;ambiente testi</DESCRIPT><CMPTYPE>1</CMPTYPE><MTDTYPE>2</MTDTYPE><EDITORDER>2</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><PARDECLTYP>0</PARDECLTYP><PARPASSTYP>1</PARPASSTYP><TYPTYPE>1</TYPTYPE><TYPE>SY-LANGU</TYPE><PARVALUE>SY-LANGU</PARVALUE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>CONSTRUCTOR</CMPNAME><SCONAME>IS_SEL</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Parametri di selezione</DESCRIPT><CMPTYPE>1</CMPTYPE><MTDTYPE>2</MTDTYPE><EDITORDER>3</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><PARDECLTYP>0</PARDECLTYP><PARPASSTYP>1</PARPASSTYP><TYPTYPE>1</TYPTYPE><TYPE>TY_S_SEL</TYPE><PAROPTIONL>X</PAROPTIONL></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>CONSTRUCTOR</CMPNAME><SCONAME>IV_PFSTATUS</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Stato GUI</DESCRIPT><CMPTYPE>1</CMPTYPE><MTDTYPE>2</MTDTYPE><EDITORDER>4</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><PARDECLTYP>0</PARDECLTYP><PARPASSTYP>1</PARPASSTYP><TYPTYPE>1</TYPTYPE><TYPE>SYPFKEY</TYPE><PAROPTIONL>X</PAROPTIONL></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>EXPORT</CMPNAME><SCONAME>IV_REASON</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Causale: I Insert/Update, D Delete, A Add</DESCRIPT><CMPTYPE>1</CMPTYPE><MTDTYPE>0</MTDTYPE><EDITORDER>1</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><PARDECLTYP>0</PARDECLTYP><PARPASSTYP>1</PARPASSTYP><TYPTYPE>1</TYPTYPE><TYPE>ZEMMM_ZOPERAZIONE</TYPE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>GET_SEL</CMPNAME><SCONAME>ES_SEL</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><CMPTYPE>1</CMPTYPE><MTDTYPE>0</MTDTYPE><EDITORDER>1</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><PARDECLTYP>3</PARDECLTYP><PARPASSTYP>0</PARPASSTYP><TYPTYPE>1</TYPTYPE><TYPE>TY_S_SEL</TYPE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>RUN</CMPNAME><SCONAME>IV_SHOW_ALV</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><CMPTYPE>1</CMPTYPE><MTDTYPE>0</MTDTYPE><EDITORDER>1</EDITORDER><DISPID>0</DISPID><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><PARDECLTYP>0</PARDECLTYP><PARPASSTYP>0</PARPASSTYP><TYPTYPE>1</TYPTYPE><TYPE>ABAP_BOOL</TYPE><PARVALUE>ABAP_TRUE</PARVALUE></item></PARAMETERS><EXCEPTIONS><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>AUTORITY_CHECK</CMPNAME><SCONAME>ZCX_BC_EXCEPTION</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Classe eccezione autorizzazione</DESCRIPT><MTDTYPE>0</MTDTYPE><EDITORDER>1</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><IS_RESUMABLE>X</IS_RESUMABLE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>CONSTRUCTOR</CMPNAME><SCONAME>ZCX_BC_EXCEPTION</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Classe eccezione autorizzazione</DESCRIPT><MTDTYPE>2</MTDTYPE><EDITORDER>1</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><IS_RESUMABLE>X</IS_RESUMABLE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>CREATE_SELECTIONS</CMPNAME><SCONAME>ZCX_BC_EXCEPTION</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Classe eccezione autorizzazione</DESCRIPT><MTDTYPE>0</MTDTYPE><EDITORDER>1</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><IS_RESUMABLE>X</IS_RESUMABLE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>EXPORT</CMPNAME><SCONAME>ZCX_BC_EXCEPTION</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Classe eccezione autorizzazione</DESCRIPT><MTDTYPE>0</MTDTYPE><EDITORDER>1</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><IS_RESUMABLE>X</IS_RESUMABLE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>INITIALIZATION</CMPNAME><SCONAME>ZCX_BC_EXCEPTION</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Classe eccezione autorizzazione</DESCRIPT><MTDTYPE>0</MTDTYPE><EDITORDER>1</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><IS_RESUMABLE>X</IS_RESUMABLE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><CMPNAME>RUN</CMPNAME><SCONAME>ZCX_BC_EXCEPTION</SCONAME><VERSION>1</VERSION><LANGU>I</LANGU><DESCRIPT>Classe eccezione autorizzazione</DESCRIPT><MTDTYPE>0</MTDTYPE><EDITORDER>1</EDITORDER><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON><IS_RESUMABLE>X</IS_RESUMABLE></item></EXCEPTIONS><IMPLEMENTINGS/><IMPL_DETAILS/><FRIENDSHIPS/><TYPEPUSAGES><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><TYPEGROUP>ABAP</TYPEGROUP><VERSION>1</VERSION><TPUTYPE>0</TPUTYPE><IMPLICIT>X</IMPLICIT></item></TYPEPUSAGES><CLSDEFERRDS/><INTDEFERRDS/><ALIASES/><INHERITANCE><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><REFCLSNAME>ZCL_BC_PROGRAM_BASE_2</REFCLSNAME><VERSION>1</VERSION><STATE>1</STATE><AUTHOR>KOSMEDEV</AUTHOR><CREATEDON>2018-03-19</CREATEDON><CHANGEDON>0000-00-00</CHANGEDON></INHERITANCE><INTERFACES/><REDEFINITIONS><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><REFCLSNAME>ZCL_BC_PROGRAM_BASE_2</REFCLSNAME><VERSION>1</VERSION><MTDNAME>ALV_SHOW</MTDNAME><EXPOSURE>2</EXPOSURE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><REFCLSNAME>ZCL_BC_PROGRAM_BASE_2</REFCLSNAME><VERSION>1</VERSION><MTDNAME>MODIFY_SCREEN</MTDNAME><EXPOSURE>2</EXPOSURE></item><item><CLSNAME>ZCL_MM_MODULA_02</CLSNAME><REFCLSNAME>ZCL_BC_PROGRAM_BASE_2</REFCLSNAME><VERSION>1</VERSION><MTDNAME>SET_DATA</MTDNAME><EXPOSURE>2</EXPOSURE></item></REDEFINITIONS><TYPE_SOURCE/><LOCALS_SRC/><LOCALS_DEF><item>*&quot;* use this source file for any type of declarations (class</item><item>*&quot;* definitions, interfaces or type declarations) you need for</item><item>*&quot;* components in the private section</item><item/></LOCALS_DEF><LOCALS_IMP><item>*&quot;* use this source file for the definition and implementation of</item><item>*&quot;* local helper classes, interface definitions and type</item><item>*&quot;* declarations</item><item/><item>CLASS lcl_handle_events DEFINITION.</item><item>  PUBLIC SECTION.</item><item>    METHODS:</item><item>      constructor IMPORTING io_sender TYPE REF TO zcl_mm_modula_02</item><item>                            io_alv    TYPE REF TO cl_salv_table</item><item>                            io_sel    TYPE REF TO cl_salv_selections,</item><item>      on_user_command FOR EVENT added_function OF cl_salv_events</item><item>        IMPORTING e_salv_function.</item><item>  PRIVATE SECTION.</item><item>    DATA: go_sender TYPE REF TO zcl_mm_modula_02,</item><item>          go_alv    TYPE REF TO cl_salv_table,</item><item>          go_sel    TYPE REF TO cl_salv_selections.</item><item>*    METHODS:</item><item>*      edit.</item><item>ENDCLASS.</item><item/><item>CLASS lcl_handle_events IMPLEMENTATION.</item><item>  METHOD constructor.</item><item>    go_sender = io_sender.</item><item>    go_alv = io_alv.</item><item>    go_sel = io_sel.</item><item>  ENDMETHOD.</item><item>  METHOD on_user_command.</item><item>    DATA: lo_selections TYPE REF TO cl_salv_selections,</item><item>          lo_salv       TYPE REF TO cl_salv_table.</item><item>    DATA: lt_rows TYPE salv_t_row.</item><item>    DATA: ls_rows TYPE i.</item><item>    DATA: message TYPE string.</item><item>    CASE e_salv_function.</item><item>      WHEN &apos;EXPORT&apos;.</item><item>        TRY.</item><item>            me-&gt;go_sender-&gt;export( iv_reason = &apos;I&apos; ).</item><item>            go_sender-&gt;set_refresh_data( abap_true ).</item><item>          CATCH cx_root INTO DATA(lcx_root).</item><item>            MESSAGE lcx_root-&gt;get_text( ) TYPE &apos;S&apos;.</item><item>        ENDTRY.</item><item>*      WHEN &apos;REFRESH&apos;.</item><item>*        go_sender-&gt;set_refresh_data( abap_true ).</item><item>*        go_sender-&gt;refresh_data( ).</item><item>*        go_alv-&gt;refresh( refresh_mode = if_salv_c_refresh=&gt;full ).</item><item>*      WHEN &apos;&amp;&amp;BACK&apos;.</item><item>*        LEAVE TO SCREEN 0.</item><item>    ENDCASE.</item><item>    TRY.</item><item>        IF ( go_sender-&gt;get_refresh_data( ) = abap_true ).</item><item>          go_sender-&gt;refresh_data( ).</item><item>        ENDIF.</item><item>        go_alv-&gt;refresh( refresh_mode = if_salv_c_refresh=&gt;full ).</item><item>      CATCH cx_root.</item><item>    ENDTRY.</item><item>  ENDMETHOD.</item><item>ENDCLASS.</item></LOCALS_IMP><LOCALS_MAC><item>*&quot;* use this source file for any macro definitions you need</item><item>*&quot;* in the implementation part of the class</item><item/></LOCALS_MAC><TEXT_POOL><I><item><ID>I</ID><KEY>001</KEY><ENTRY>Lista ordini</ENTRY><LENGTH>54</LENGTH></item><item><ID>I</ID><KEY>002</KEY><ENTRY>Lista consegne</ENTRY><LENGTH>24</LENGTH></item><item><ID>I</ID><KEY>003</KEY><ENTRY>Lista documenti materiale</ENTRY><LENGTH>50</LENGTH></item></I></TEXT_POOL><METHOD_SOURCE><AUTORITY_CHECK><item>  method AUTORITY_CHECK.</item><item>*    AUTHORITY-CHECK OBJECT &apos;J_B_BUKRS&apos;</item><item>*       ID &apos;BUKRS&apos; FIELD gs_sel-p_bukrs.</item><item>*    IF sy-subrc &lt;&gt; 0.</item><item>*      RAISE EXCEPTION TYPE lcx_auth</item><item>*        EXPORTING</item><item>*          id    = &apos;ZMMM_MODULA&apos;</item><item>*          no    = &apos;002&apos;</item><item>*          text1 = gs_sel-p_bukrs.</item><item>*    ENDIF.</item><item>*</item><item>*    AUTHORITY-CHECK OBJECT &apos;J_B_BUKRS&apos;</item><item>*       ID &apos;ACTVT&apos; DUMMY</item><item>*       ID &apos;BUKRS&apos; FIELD gs_sel-p_bukrs.</item><item>*    IF sy-subrc &lt;&gt; 0.</item><item>*      RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s002(zmmm_modula) W</item><item>*    ENDIF.</item><item/><item>    AUTHORITY-CHECK OBJECT &apos;M_BEST_WRK&apos;</item><item>       ID &apos;ACTVT&apos; DUMMY</item><item>       ID &apos;WERKS&apos; FIELD gs_sel-p_werks.</item><item>    IF sy-subrc &lt;&gt; 0.</item><item>      RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s001(zmmm_modula) WI</item><item>    ENDIF.</item><item>  endmethod.</item></AUTORITY_CHECK><CONSTRUCTOR><item>  METHOD CONSTRUCTOR.</item><item>    super-&gt;constructor( iv_program = iv_program iv_language = iv_languag</item><item>    create_selections( ).</item><item>  ENDMETHOD.</item></CONSTRUCTOR><CREATE_SELECTIONS><item>  METHOD CREATE_SELECTIONS.</item><item>    DATA: lref_sel TYPE REF TO data.</item><item>    CREATE DATA lref_sel TYPE ty_s_sel.</item><item>    set_selections( CHANGING cref_sel = lref_sel ).</item><item>    FIELD-SYMBOLS: &lt;sel&gt;    TYPE any.</item><item>    ASSIGN lref_sel-&gt;* TO &lt;sel&gt;.</item><item>    IF ( sy-subrc = 0 ).</item><item>      gs_sel = &lt;sel&gt;.</item><item>    ENDIF.</item><item>  ENDMETHOD.</item></CREATE_SELECTIONS><EXPORT><item>  METHOD export.</item><item>    DATA: lv_esito       TYPE  zdbc_esito,</item><item>          lv_descr_esito TYPE  zdbc_descr_esito.</item><item/><item>    DATA(lv_send_anag) = gs_sel-p_sendfi.</item><item/><item>    CALL FUNCTION &apos;Z_MMM_MOD_ME2_ORD&apos;</item><item>      EXPORTING</item><item>        iv_bukrs       = gs_sel-p_bukrs</item><item>        iv_werks       = gs_sel-p_werks</item><item>        iv_lgort       = gs_sel-p_lgort</item><item>        iv_lgpbe       = gs_sel-p_lgpbe</item><item>        iv_aufnr       = gs_sel-p_aufnr</item><item>        iv_vbeln       = gs_sel-p_vbeln</item><item>        iv_mblnr       = gs_sel-p_mblnr</item><item>        iv_mjahr       = gs_sel-p_mjahr</item><item>        iv_send_file   = gs_sel-p_sendfi</item><item>        iv_send_anag   = lv_send_anag</item><item>      IMPORTING</item><item>        ev_esito       = lv_esito</item><item>        ev_descr_esito = lv_descr_esito</item><item>      TABLES</item><item>        it_prel_odp    = gt_prel_odp</item><item>        it_prel_cons   = gt_prel_cons.</item><item/><item>    IF ( lv_esito &lt;&gt; &apos;000&apos; ).</item><item>      IF ( strlen( lv_descr_esito ) &lt; 50 ).</item><item>        RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s398(00) WITH lv_d</item><item>      ELSE.</item><item>        DATA(lv_descr_esito_1) = lv_descr_esito(50).</item><item>        DATA(lv_descr_esito_2) = lv_descr_esito+50.</item><item>        RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s398(00) WITH lv_d</item><item>      ENDIF.</item><item>    ELSE.</item><item>      IF ( NOT lv_descr_esito IS INITIAL ).</item><item>        IF ( strlen( lv_descr_esito ) &lt; 50 ).</item><item>          RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s398(00) WITH lv</item><item>        ELSE.</item><item>          lv_descr_esito_1 = lv_descr_esito(50).</item><item>          lv_descr_esito_2 = lv_descr_esito+50.</item><item>          MESSAGE s398(00) WITH lv_descr_esito_1 lv_descr_esito_2.</item><item>        ENDIF.</item><item>      ENDIF.</item><item>    ENDIF.</item><item>  ENDMETHOD.</item></EXPORT><GET_SEL><item>  METHOD GET_SEL.</item><item>    es_sel = gs_sel.</item><item>  ENDMETHOD.</item></GET_SEL><INITIALIZATION><item>  METHOD INITIALIZATION.</item><item>    DATA: lt_return    TYPE TABLE OF bapiret2,</item><item>          lt_parameter TYPE TABLE OF bapiparam,</item><item>          lv_bukrs     TYPE bukrs,</item><item>          lv_werks     TYPE werks_d,</item><item>          lv_ekgrp     TYPE ekgrp,</item><item>          lv_superuser TYPE xfeld.</item><item/><item>    IMPORT p_bukrs TO gs_sel-p_bukrs FROM MEMORY ID &apos;ZMMM_MOD_MONITOR_BU</item><item>    IMPORT p_werks TO gs_sel-p_werks FROM MEMORY ID &apos;ZMMM_MOD_MONITOR_WE</item><item>    IF ( gs_sel-p_lgort IS INITIAL ).</item><item>      IMPORT p_lgort TO gs_sel-p_lgort FROM MEMORY ID &apos;ZMMM_MOD_MONITOR_</item><item>    ENDIF.</item><item>    IF ( gs_sel-p_lgpbe IS INITIAL ).</item><item>      IMPORT p_lgpbe TO gs_sel-p_lgpbe FROM MEMORY ID &apos;ZMMM_MOD_MONITOR_</item><item>    ENDIF.</item><item/><item>    &quot; rileva parametrizzazione utente</item><item>    CALL FUNCTION &apos;Z_UTIL_USER&apos;</item><item>      EXPORTING</item><item>        username  = sy-uname</item><item>*       BUKRS_SPRUSR        =</item><item>*       WERKS_SPRUSR        =</item><item>*       FL_CHAR2_USER       = &apos;X&apos;</item><item>*       FL_BUK_EQ_WRK       =</item><item>      IMPORTING</item><item>        bukrs     = lv_bukrs</item><item>        werks     = lv_werks</item><item>*       ekorg     = lv_ekorg</item><item>        ekgrp     = lv_ekgrp</item><item>        superuser = lv_superuser</item><item>      TABLES</item><item>        parameter = lt_parameter</item><item>        return    = lt_return</item><item>      EXCEPTIONS</item><item>        errore    = 1</item><item>        no_bukrs  = 2</item><item>        no_werks  = 3</item><item>        OTHERS    = 4.</item><item>    IF ( sy-subrc = 0 ).</item><item>      IF ( gs_sel-p_bukrs IS INITIAL ).</item><item>        gs_sel-p_bukrs = lv_bukrs.</item><item>      ENDIF.</item><item>      IF ( gs_sel-p_werks IS INITIAL ).</item><item>        gs_sel-p_werks = lv_werks.</item><item>      ENDIF.</item><item/><item>*      IF ( gs_sel-s_ekgrp[] IS INITIAL AND NOT lv_ekgrp IS INITIAL ).</item><item>*        DATA: ls_ekgrp TYPE LINE OF ty_s_sel-s_ekgrp.</item><item>*        CLEAR: ls_ekgrp.</item><item>*        ls_ekgrp-sign = &apos;I&apos;.</item><item>*        ls_ekgrp-option = &apos;EQ&apos;.</item><item>*        ls_ekgrp-low = lv_ekgrp.</item><item>*        APPEND ls_ekgrp TO gs_sel-s_ekgrp.</item><item>*      ENDIF.</item><item/><item>      DATA: lref_sel TYPE REF TO data.</item><item>      CREATE DATA lref_sel TYPE ty_s_sel.</item><item>*        set_selections( CHANGING cref_sel = lref_sel ).</item><item>      FIELD-SYMBOLS: &lt;sel&gt;    TYPE any.</item><item>      ASSIGN lref_sel-&gt;* TO &lt;sel&gt;.</item><item>      IF ( sy-subrc = 0 ).</item><item>        &lt;sel&gt; = gs_sel.</item><item>        set_selections( CHANGING cref_sel = lref_sel ).</item><item>      ENDIF.</item><item/><item>      IF lv_superuser &lt;&gt; &apos;X&apos;.</item><item>*    IF s_bukrs-low &lt;&gt; wa_bukrs_user.</item><item>*      MESSAGE s398(00) WITH TEXT-e01 DISPLAY LIKE &apos;E&apos;.</item><item>*      LEAVE LIST-PROCESSING.</item><item>*    ENDIF.</item><item>      ENDIF.</item><item>    ENDIF.</item><item/><item>  ENDMETHOD.</item></INITIALIZATION><RUN><item>  METHOD run.</item><item>    create_selections( ).</item><item>    initialization( ).</item><item>    autority_check( ).</item><item/><item>    CASE abap_true.</item><item>      WHEN gs_sel-p_cons.</item><item>        IF ( gs_sel-p_vbeln IS INITIAL ).</item><item>          RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s026(zmmm_modula</item><item>        ENDIF.</item><item/><item>      WHEN gs_sel-p_odp.</item><item>        IF ( gs_sel-p_aufnr IS INITIAL ).</item><item>          RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s025(zmmm_modula</item><item>        ENDIF.</item><item/><item>      WHEN gs_sel-p_mat.</item><item>        IF ( gs_sel-p_mblnr IS INITIAL or gs_sel-p_mjahr is initial ).</item><item>          RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s034(zmmm_modula</item><item>        ENDIF.</item><item/><item>    ENDCASE.</item><item/><item>*   Estrazione dati</item><item>    set_data( ).</item><item>    CASE abap_true.</item><item>      WHEN gs_sel-p_odp.</item><item>        alv_create( EXPORTING iv_title = &apos;Lista ordini&apos;(001)</item><item>                    CHANGING ct_data = gt_data ).</item><item/><item>      WHEN gs_sel-p_cons.</item><item>        alv_create( EXPORTING iv_title = &apos;Lista consegne&apos;(002)</item><item>                    CHANGING ct_data = gt_data ).</item><item/><item>      WHEN gs_sel-p_mat.</item><item>        alv_create( EXPORTING iv_title = &apos;Lista documenti materiale&apos;(003</item><item>                    CHANGING ct_data = gt_data ).</item><item>    ENDCASE.</item><item>    IF ( iv_show_alv = abap_true ).</item><item>      me-&gt;alv_show( ).</item><item>    ENDIF.</item><item>  ENDMETHOD.</item></RUN><ALV_SHOW><item>  method ALV_SHOW.</item><item>    DATA : lo_selections    TYPE REF TO cl_salv_selections,</item><item>           lo_events        TYPE REF TO cl_salv_events_table,</item><item>           lo_event_handler TYPE REF TO lcl_handle_events,</item><item>           lo_sel           TYPE REF TO cl_salv_selections.</item><item/><item>    lo_sel = go_alv-&gt;get_selections( ).</item><item>    lo_sel-&gt;set_selection_mode( if_salv_c_selection_mode=&gt;multiple ).</item><item/><item>    lo_events = go_alv-&gt;get_event( ).</item><item>    lo_event_handler = NEW lcl_handle_events( io_sender = me</item><item>                                              io_alv    = go_alv</item><item>                                              io_sel    = lo_sel ).</item><item/><item>    SET HANDLER lo_event_handler-&gt;on_user_command FOR lo_events.</item><item/><item>    super-&gt;alv_show( ).</item><item>  endmethod.</item></ALV_SHOW><MODIFY_SCREEN><item>  METHOD modify_screen.</item><item>    super-&gt;modify_screen( ).</item><item>    create_selections( ).</item><item/><item>    LOOP AT SCREEN INTO DATA(ls_screen).</item><item>      CASE abap_true.</item><item>        WHEN gs_sel-p_cons.</item><item>          IF ( ls_screen-group1 = &apos;AUF&apos; ).</item><item>            ls_screen-invisible = 1.</item><item>            ls_screen-active = 0.</item><item>            MODIFY screen FROM ls_screen.</item><item>          ENDIF.</item><item>          IF ( ls_screen-group1 = &apos;VBL&apos; ).</item><item>            ls_screen-invisible = 0.</item><item>            ls_screen-active = 1.</item><item>            MODIFY screen FROM ls_screen.</item><item>          ENDIF.</item><item>          IF ( ls_screen-group1 = &apos;MAT&apos; ).</item><item>            ls_screen-invisible = 1.</item><item>            ls_screen-active = 0.</item><item>            MODIFY screen FROM ls_screen.</item><item>          ENDIF.</item><item/><item>        WHEN gs_sel-p_odp.</item><item>          IF ( ls_screen-group1 = &apos;VBL&apos; ).</item><item>            ls_screen-invisible = 1.</item><item>            ls_screen-active = 0.</item><item>            MODIFY screen FROM ls_screen.</item><item>          ENDIF.</item><item>          IF ( ls_screen-group1 = &apos;AUF&apos; ).</item><item>            ls_screen-invisible = 0.</item><item>            ls_screen-active = 1.</item><item>            MODIFY screen FROM ls_screen.</item><item>          ENDIF.</item><item>          IF ( ls_screen-group1 = &apos;MAT&apos; ).</item><item>            ls_screen-invisible = 1.</item><item>            ls_screen-active = 0.</item><item>            MODIFY screen FROM ls_screen.</item><item>          ENDIF.</item><item/><item>        WHEN gs_sel-p_mat.</item><item>          IF ( ls_screen-group1 = &apos;VBL&apos; ).</item><item>            ls_screen-invisible = 1.</item><item>            ls_screen-active = 0.</item><item>            MODIFY screen FROM ls_screen.</item><item>          ENDIF.</item><item>          IF ( ls_screen-group1 = &apos;AUF&apos; ).</item><item>            ls_screen-invisible = 1.</item><item>            ls_screen-active = 0.</item><item>            MODIFY screen FROM ls_screen.</item><item>          ENDIF.</item><item>          IF ( ls_screen-group1 = &apos;MAT&apos; ).</item><item>            ls_screen-invisible = 0.</item><item>            ls_screen-active = 1.</item><item>            MODIFY screen FROM ls_screen.</item><item>          ENDIF.</item><item>      ENDCASE.</item><item>    ENDLOOP.</item><item/><item>    CASE abap_true.</item><item>      WHEN gs_sel-p_cons.</item><item>        IF ( gs_sel-p_vbeln IS INITIAL ).</item><item>          RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s026(zmmm_modula</item><item>        ENDIF.</item><item/><item>      WHEN gs_sel-p_odp.</item><item>        IF ( gs_sel-p_aufnr IS INITIAL ).</item><item>          RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s025(zmmm_modula</item><item>        ENDIF.</item><item/><item>      WHEN gs_sel-p_mat.</item><item>        IF ( gs_sel-p_mblnr IS INITIAL OR gs_sel-p_mjahr IS INITIAL ).</item><item>          RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s034(zmmm_modula</item><item>        ENDIF.</item><item>    ENDCASE.</item><item/><item>  ENDMETHOD.</item></MODIFY_SCREEN><SET_DATA><item>  METHOD set_data.</item><item>    DATA: lv_esito       TYPE  zdbc_esito,</item><item>          lv_descr_esito TYPE  zdbc_descr_esito.</item><item/><item>    REFRESH: gt_data, gt_prel_cons, gt_prel_odp.</item><item/><item>    CASE abap_true.</item><item>      WHEN gs_sel-p_odp.</item><item>        CALL FUNCTION &apos;ZPP_CHECK_AUFNR&apos;</item><item>          EXPORTING</item><item>*           I_BADGE       =</item><item>            i_aufnr       = gs_sel-p_aufnr</item><item>            i_lock        = &apos;N&apos;</item><item>*           I_COLLECT     = &apos;X&apos;</item><item>          IMPORTING</item><item>            e_esito       = lv_esito</item><item>            e_descr_esito = lv_descr_esito</item><item>            et_comp_aufnr = gt_prel_odp.</item><item>*        DELETE gt_prel_odp WHERE zpcvis IS INITIAL.   &quot;Tonolli_G - Del</item><item/><item>        DATA: ls_data TYPE ty_s_data.</item><item>        DATA: ls_ztmmm_mod_am_cfg TYPE ztmmm_mod_am_cfg.   &quot;Tonolli_G -</item><item>        LOOP AT gt_prel_odp INTO DATA(ls_prel_odp).</item><item>          DATA(lv_tabix) = sy-tabix.</item><item>*         Tonolli_G - Start Ins - 21/03/2018</item><item>*         Verificare con la tabella ZTMMM_MOD_AM_CFG se l&apos;ubicazione app</item><item>          SELECT SINGLE * INTO CORRESPONDING FIELDS OF ls_ztmmm_mod_am_c</item><item>                 FROM aufk INNER JOIN ztmmm_mod_am_cfg ON ztmmm_mod_am_c</item><item>                                                          ztmmm_mod_am_c</item><item>                                                          ztmmm_mod_am_c</item><item>                                                          ztmmm_mod_am_c</item><item>                 WHERE aufnr = gs_sel-p_aufnr.</item><item>          IF ( sy-subrc &lt;&gt; 0 ).</item><item>            DELETE gt_prel_odp INDEX lv_tabix.</item><item>            CONTINUE.</item><item>          ENDIF.</item><item>*         Tonolli_G - Start Ins - 21/03/2018</item><item>          CLEAR: ls_data.</item><item>          MOVE-CORRESPONDING ls_prel_odp TO ls_data.</item><item>          ls_data-menge = ls_prel_odp-openqty.</item><item>          ls_data-bukrs = gs_sel-p_bukrs.</item><item>          ls_data-werks = gs_sel-p_werks.</item><item>          ls_data-lgpbe = gs_sel-p_lgpbe.</item><item>          APPEND ls_data TO gt_data.</item><item>        ENDLOOP.</item><item/><item>      WHEN gs_sel-p_cons.</item><item>        CALL FUNCTION &apos;ZMM_CHECK_DELIVERY&apos;</item><item>          EXPORTING</item><item>            i_vbeln       = gs_sel-p_vbeln</item><item>*           I_BADGE       =</item><item>*           I_MATNR       =</item><item>            i_lock        = &apos;N&apos;</item><item>          IMPORTING</item><item>            e_esito       = lv_esito</item><item>            e_descr_esito = lv_descr_esito</item><item>            e_prelievi    = gt_prel_cons.</item><item/><item>*       DELETE gt_prel_cons WHERE zpsvis IS INITIAL.   &quot;Tonolli_G - Del</item><item/><item>        LOOP AT gt_prel_cons INTO DATA(ls_prel_cons).</item><item>          lv_tabix = sy-tabix.</item><item>*         Tonolli_G - Start Ins - 21/03/2018</item><item>*         Verificare con la tabella ZTMMM_MOD_AM_CFG se l&apos;ubicazione app</item><item>          SELECT SINGLE * INTO CORRESPONDING FIELDS OF ls_ztmmm_mod_am_c</item><item>                 FROM t001k INNER JOIN ztmmm_mod_am_cfg ON ztmmm_mod_am_</item><item>                                                           ztmmm_mod_am_</item><item>                                                           ztmmm_mod_am_</item><item>                                                           ztmmm_mod_am_</item><item>                 WHERE t001k~bwkey = ls_prel_cons-werks.</item><item>          IF ( sy-subrc &lt;&gt; 0 ).</item><item>            DELETE gt_prel_odp INDEX lv_tabix.</item><item>            CONTINUE.</item><item>          ENDIF.</item><item>*         Tonolli_G - Start Ins - 21/03/2018</item><item/><item>          CLEAR: ls_data.</item><item>          MOVE-CORRESPONDING ls_prel_cons TO ls_data.</item><item>          ls_data-bukrs = gs_sel-p_bukrs.</item><item>          ls_data-meins = ls_prel_cons-vrkme.</item><item>          ls_data-maktx = ls_prel_cons-arktx.</item><item>          ls_data-menge = ls_prel_cons-pikmg.</item><item>          APPEND ls_data TO gt_data.</item><item>        ENDLOOP.</item><item/><item>      WHEN gs_sel-p_mat.</item><item>        DATA: lt_mseg TYPE TABLE OF mseg.</item><item>        REFRESH: lt_mseg, gt_prel_odp.</item><item>        SELECT * INTO CORRESPONDING FIELDS OF TABLE lt_mseg</item><item>                 FROM mseg INNER JOIN ztmmm_mod_am_cfg ON ztmmm_mod_am_c</item><item>                                                            ztmmm_mod_am</item><item>                                                            ztmmm_mod_am</item><item>                                                            ztmmm_mod_am</item><item/><item>                 WHERE mseg~mblnr = gs_sel-p_mblnr</item><item>                 AND   mseg~mjahr = gs_sel-p_mjahr</item><item>                 AND   mseg~bukrs = gs_sel-p_bukrs</item><item>                 AND   mseg~werks = gs_sel-p_werks</item><item>                 AND   mseg~lgort = gs_sel-p_lgort.</item><item>        LOOP AT lt_mseg INTO DATA(ls_mseg).</item><item>          CLEAR: ls_data.</item><item>          MOVE-CORRESPONDING ls_mseg TO ls_data.</item><item>          ls_data-bukrs = gs_sel-p_bukrs.</item><item>          ls_data-meins = ls_mseg-meins.</item><item>          CLEAR: ls_data-maktx.</item><item>          SELECT SINGLE maktx INTO ls_data-maktx FROM makt WHERE matnr =</item><item>                                                           AND   spras =</item><item>          ls_data-menge = ls_mseg-menge.</item><item>          APPEND ls_data TO gt_data.</item><item/><item>          CLEAR: ls_prel_odp.</item><item>          MOVE-CORRESPONDING ls_data TO ls_prel_odp.</item><item>          ls_prel_odp-openqty = ls_data-menge.</item><item>          APPEND ls_prel_odp TO gt_prel_odp.</item><item>        ENDLOOP.</item><item>        lv_esito = &apos;000&apos;.</item><item>    ENDCASE.</item><item/><item>    IF ( lv_esito &lt;&gt; &apos;000&apos; ).</item><item>      IF ( strlen( lv_descr_esito ) &lt; 50 ).</item><item>        RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s398(00) WITH lv_d</item><item>      ELSE.</item><item>        DATA(lv_descr_esito_1) = lv_descr_esito(50).</item><item>        DATA(lv_descr_esito_2) = lv_descr_esito+50.</item><item>        RAISE EXCEPTION TYPE zcx_bc_exception MESSAGE s398(00) WITH lv_d</item><item>      ENDIF.</item><item>    ENDIF.</item><item/><item>    super-&gt;set_data( it_data = gt_data ).</item><item>  ENDMETHOD.</item></SET_DATA></METHOD_SOURCE></CLASS_ROOT>